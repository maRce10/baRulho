<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Measure full spectrum sound noise profiles — noise_profile • baRulho</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Measure full spectrum sound noise profiles — noise_profile"><meta property="og:description" content="noise_profile Measure full spectrum sound pressure levels (i.e. noise profiles) in sound files or extended selection tables."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">baRulho</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/align_test_sounds.html">Synthesize and align test sounds</a>
    </li>
    <li>
      <a href="../articles/quantify_degradation.html">Quantify degradation</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/maRce10/baRulho/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Measure full spectrum sound noise profiles</h1>
    <small class="dont-index">Source: <a href="https://github.com/maRce10/baRulho/blob/HEAD/R/noise_profile.R" class="external-link"><code>R/noise_profile.R</code></a></small>
    <div class="hidden name"><code>noise_profile.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>noise_profile</code> Measure full spectrum sound pressure levels (i.e. noise profiles) in sound files or extended selection tables.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">noise_profile</span><span class="op">(</span>X <span class="op">=</span> <span class="cn">NULL</span>, files <span class="op">=</span> <span class="cn">NULL</span>, mar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>noise.ref <span class="op">=</span> <span class="st">"adjacent"</span>, parallel <span class="op">=</span> <span class="cn">NULL</span>, cores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"mc.cores"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>pb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"pb"</span>, <span class="cn">TRUE</span><span class="op">)</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sound.files.path"</span>, <span class="st">"."</span><span class="op">)</span>,</span>
<span>bp <span class="op">=</span> <span class="cn">NULL</span>, hop.size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"hop.size"</span>, <span class="fl">1</span><span class="op">)</span>, wl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"wl"</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>PSD <span class="op">=</span> <span class="cn">FALSE</span>, norm <span class="op">=</span> <span class="cn">TRUE</span>, dB <span class="op">=</span> <span class="st">"A"</span>, averaged <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>X</dt>
<dd><p>Object of class 'data.frame', 'selection_table' or 'extended_selection_table' (the last 2 classes are created by the function <code><a href="https://marce10.github.io/warbleR/reference/selection_table.html" class="external-link">selection_table</a></code> from the warbleR package) with the reference to the sounds in the master sound file. Must contain the following columns: 1) "sound.files": name of the .wav files, 2) "selec": unique selection identifier (within a sound file), 3) "start": start time and 4) "end": end time of selections, 5)  "bottom.freq": low frequency for bandpass, 6) "top.freq": high frequency for bandpass and 7) "sound.id": ID of sounds used to identify counterparts across distances (needed for "custom" noise reference, see "noise.ref" argument). Default is <code>NULL</code>.</p></dd>


<dt>files</dt>
<dd><p>Character vector with names of wave files to be analyzed. Files must be found in 'path' supplied (or in the working directory if 'path' is not supplied). Default is <code>NULL</code>.</p></dd>


<dt>mar</dt>
<dd><p>numeric vector of length 1. Specifies the margins adjacent to
the start and end points of selection over which to measure ambient noise. Required if 'X' is supplied and ignored if not supplied. Default is <code>NULL</code>.</p></dd>


<dt>noise.ref</dt>
<dd><p>Character vector of length 1 to determined which noise segment must be used for measuring ambient noise. Ignored if 'X' is not supplied. Two options are available:</p><ul><li><p><code>adjacent</code>: measure ambient noise right before the sound (using argument 'mar' to define duration of ambient noise segments).</p></li>
<li><p><code>custom</code>: measure ambient noise segments referenced in the selection table (labeled as 'ambient' in the 'sound.id' column).</p></li>
</ul></dd>


<dt>parallel</dt>
<dd><p>DEPRECATED. Use 'cores' instead.</p></dd>


<dt>cores</dt>
<dd><p>Numeric vector of length 1. Controls whether parallel computing is applied by specifying the number of cores to be used. Default is 1 (i.e. no parallel computing).</p></dd>


<dt>pb</dt>
<dd><p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>.</p></dd>


<dt>path</dt>
<dd><p>Character string containing the directory path where the sound files are located.
If <code>NULL</code> (default) then the current working directory is used.</p></dd>


<dt>bp</dt>
<dd><p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Default is <code>NULL</code>.</p></dd>


<dt>hop.size</dt>
<dd><p>A numeric vector of length 1 specifying the time window duration (in ms). Default is 1 ms, which is equivalent to ~45 wl for a 44.1 kHz sampling rate. Ignored if 'wl' is supplied.</p></dd>


<dt>wl</dt>
<dd><p>A numeric vector of length 1 specifying the window length of the spectrogram, default
is NULL. Ignored if <code>bp = NULL</code>. If supplied, 'hop.size' is ignored.
Note that lower values will increase time resolution, which is more important for amplitude ratio calculations.</p></dd>


<dt>PSD</dt>
<dd><p>Logical to control whether the Probability Mass Function (the probability distribution of frequencies). See <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>. Default is <code>FALSE</code>.</p></dd>


<dt>norm</dt>
<dd><p>Logical to control whether amplitude values are normalized (divided by the maximum) so the highest value is 1. See <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>. Default is <code>TRUE</code>.</p></dd>


<dt>dB</dt>
<dd><p>A character string of length 1 specifying the type dB to return: "max0" for a maximum dB value at 0, "A", "B", "C", "D", and "ITU" for common dB weights. See <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>. Default is <code>"A"</code>.</p></dd>


<dt>averaged</dt>
<dd><p>Logical to control if frequency spectra are averaged within a sound file. Default is <code>TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame containing the frequency spectra for each sound file or wave object (if 'X' is supplied and is of class 'extended.selection.table').</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The function estimates full spectrum sound pressure levels (i.e. noise profiles) of ambient noise. This can be done on data frames/(extended) selection tables (using the segments containing no target sound or the 'ambient' sound id) or over complete sound files in the working directory (or path supplied). The function uses <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code> internally to calculate frequency spectra.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Araya-Salas, M. (2020). baRulho: baRulho: quantifying degradation of (animal) acoustic signals in R. R package version 1.0.2.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="excess_attenuation.html">excess_attenuation</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">{</span><span class="op">{</span> <span class="co"># load example data</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"test_sounds_est"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># measure on custom noise reference</span></span></span>
<span class="r-in"><span>  <span class="fu">noise_profile</span><span class="op">(</span>X <span class="op">=</span> <span class="va">test_sounds_est</span>, mar <span class="op">=</span> <span class="fl">0.01</span>, pb <span class="op">=</span> <span class="cn">FALSE</span>, noise.ref <span class="op">=</span> <span class="st">"custom"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># remove noise selections so noise is measured right before the signals</span></span></span>
<span class="r-in"><span>  <span class="va">pe</span> <span class="op">&lt;-</span> <span class="va">test_sounds_est</span><span class="op">[</span><span class="va">test_sounds_est</span><span class="op">$</span><span class="va">sound.id</span> <span class="op">!=</span> <span class="st">"ambient"</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">noise_profile</span><span class="op">(</span>X <span class="op">=</span> <span class="va">pe</span>, mar <span class="op">=</span> <span class="fl">0.01</span>, pb <span class="op">=</span> <span class="cn">FALSE</span>, noise.ref <span class="op">=</span> <span class="st">"adjacent"</span><span class="op">)</span> <span class="op">}</span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       sound.files      freq           amp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  10m_closed.wav  1.002273  -1.478756370</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  10m_closed.wav  2.004545  -8.554912560</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  10m_closed.wav  3.006818 -15.653879395</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  10m_closed.wav  4.009091 -20.594564397</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  10m_closed.wav  5.011364 -24.596826317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  10m_closed.wav  6.013636 -27.741536121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  10m_closed.wav  7.015909 -28.631141207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  10m_closed.wav  8.018182 -29.343274598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  10m_closed.wav  9.020455 -31.581649783</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10m_closed.wav 10.022727 -37.142756979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   10m_open.wav  1.002273  -1.470944432</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12   10m_open.wav  2.004545  -5.716210091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13   10m_open.wav  3.006818 -14.060376878</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14   10m_open.wav  4.009091 -21.637019767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   10m_open.wav  5.011364 -28.007595476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   10m_open.wav  6.013636 -31.998254047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17   10m_open.wav  7.015909 -33.040067144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   10m_open.wav  8.018182 -33.446761775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   10m_open.wav  9.020455 -36.054384166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20   10m_open.wav 10.022727 -40.262096085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21    1m_open.wav  1.002273   0.001384514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    1m_open.wav  2.004545  -4.328099010</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23    1m_open.wav  3.006818 -12.731830547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    1m_open.wav  4.009091 -20.519891620</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    1m_open.wav  5.011364 -24.786032150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26    1m_open.wav  6.013636 -27.331145913</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    1m_open.wav  7.015909 -27.522403062</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    1m_open.wav  8.018182 -27.601169568</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    1m_open.wav  9.020455 -30.958903505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30    1m_open.wav 10.022727 -36.213758740</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 30m_closed.wav  1.002273  -5.018620398</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 30m_closed.wav  2.004545 -19.660800804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 30m_closed.wav  3.006818 -26.467263845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 30m_closed.wav  4.009091 -29.190019017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 30m_closed.wav  5.011364 -33.368022266</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 30m_closed.wav  6.013636 -37.485873353</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37 30m_closed.wav  7.015909 -39.725404754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 30m_closed.wav  8.018182 -42.088478865</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39 30m_closed.wav  9.020455 -44.455196777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40 30m_closed.wav 10.022727 -47.253627732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41   30m_open.wav  1.002273  -0.794205765</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42   30m_open.wav  2.004545  -5.394132145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43   30m_open.wav  3.006818 -16.362837354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44   30m_open.wav  4.009091 -21.711879855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45   30m_open.wav  5.011364 -26.204882614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46   30m_open.wav  6.013636 -26.312227870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47   30m_open.wav  7.015909 -28.104324225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48   30m_open.wav  8.018182 -28.673914281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49   30m_open.wav  9.020455 -32.218532962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50   30m_open.wav 10.022727 -34.076725570</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marcelo Araya-Salas.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

